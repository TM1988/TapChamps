<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=no, viewport-fit=cover">
    <meta name="apple-mobile-web-app-capable" content="yes">
    <meta name="apple-mobile-web-app-status-bar-style" content="black-translucent">
    <meta name="mobile-web-app-capable" content="yes">
    <meta name="theme-color" content="#667eea">
    <title>Tap Race - Reflex Challenge</title>
    <link rel="stylesheet" href="style.css">
    <style>
        /* CRITICAL: Inline styles for Vercel compatibility */
        * { 
            -webkit-tap-highlight-color: transparent !important;
            -webkit-touch-callout: none !important;
            -webkit-user-select: none !important;
            user-select: none !important;
        }
        button, .btn, input, select {
            -webkit-appearance: none !important;
            appearance: none !important;
            -webkit-tap-highlight-color: rgba(0,0,0,0.1) !important;
            pointer-events: auto !important;
            touch-action: manipulation !important;
        }
    </style>
</head>
<body>
    <div id="app">
        <!-- Main Menu -->
        <div id="main-menu" class="screen active">
            <div class="container">
                <h1 class="game-title">‚ö° TAP RACE ‚ö°</h1>
                <p class="game-subtitle">Ultimate Reflex Challenge</p>
                
                <div class="menu-card">
                    <div class="input-group">
                        <input type="text" id="player-name" placeholder="Enter your name" maxlength="20">
                    </div>
                    
                    <div class="input-group">
                        <input type="text" id="room-id" placeholder="Room ID (optional)" maxlength="10">
                        <small>Leave empty to create a new room</small>
                    </div>
                    
                    <div class="input-group">
                        <select id="game-mode" class="game-mode-select">
                            <option value="classic">Classic Mode</option>
                            <option value="blitz">Blitz Mode</option>
                            <option value="powerUp">Power-Up Madness</option>
                            <option value="elimination">Elimination</option>
                            <option value="marathon">Marathon</option>
                            <option value="precision">Precision Mode</option>
                        </select>
                        <small>Choose your preferred game mode</small>
                    </div>
                    
                    <button id="join-game" class="btn btn-primary">Join Game</button>
                    <button id="view-leaderboard" class="btn btn-secondary">View Leaderboard</button>
                    <button id="view-achievements" class="btn btn-secondary">Achievements</button>
                    
                    <div class="settings-panel">
                        <div class="setting-item">
                            <span>Sound Effects</span>
                            <button id="toggle-sound" class="btn-toggle active">ON</button>
                        </div>
                    </div>
                </div>
            </div>
        </div>

        <!-- Lobby -->
        <div id="lobby" class="screen">
            <div class="container">
                <h2>Game Lobby</h2>
                <div class="room-info">
                    <p>Room ID: <span id="current-room-id" class="highlight"></span></p>
                    <p>Mode: <span id="lobby-game-mode" class="highlight"></span></p>
                    <small>Share this ID with friends to play together!</small>
                </div>
                
                <div class="players-list">
                    <h3>Players</h3>
                    <div id="players-container"></div>
                </div>
                
                <div class="chat-section">
                    <div class="chat-messages" id="chat-messages"></div>
                    <div class="chat-input-container">
                        <input type="text" id="chat-input" placeholder="Type a message..." maxlength="100">
                        <button id="send-chat" class="btn-chat">Send</button>
                    </div>
                </div>
                
                <div class="lobby-actions">
                    <button id="ready-btn" class="btn btn-primary">Ready to Play!</button>
                    <button id="leave-room" class="btn btn-secondary">Leave Room</button>
                </div>
                
                <div id="waiting-message" class="waiting-message hidden">
                    Waiting for all players to be ready...
                </div>
            </div>
        </div>

        <!-- Game -->
        <div id="game" class="screen">
            <div class="game-header">
                <div class="round-info">
                    Round <span id="current-round">1</span> of <span id="max-rounds">5</span>
                </div>
                <div class="scores" id="game-scores"></div>
            </div>
            
            <div class="game-area">
                <div class="power-ups-container" id="power-ups-container"></div>
                
                <div id="tap-zone" class="tap-zone">
                    <div id="tap-circle" class="tap-circle">
                        <span id="tap-text">Wait...</span>
                    </div>
                </div>
                
                <div id="game-message" class="game-message"></div>
                
                <div class="active-powerups" id="active-powerups"></div>
                
                <div id="round-results" class="round-results hidden">
                    <h3>Round Results</h3>
                    <div id="round-results-list"></div>
                </div>
            </div>
        </div>

        <!-- Final Results -->
        <div id="final-results" class="screen">
            <div class="container">
                <h2>üèÜ Final Results üèÜ</h2>
                <div id="final-results-list" class="results-list"></div>
                <div class="final-actions">
                    <button id="play-again" class="btn btn-primary">Play Again</button>
                    <button id="back-to-menu" class="btn btn-secondary">Main Menu</button>
                </div>
            </div>
        </div>

        <!-- Achievements -->
        <div id="achievements" class="screen">
            <div class="container">
                <h2>üèÜ Achievements üèÜ</h2>
                <div id="achievements-list" class="achievements-list"></div>
                <button id="back-from-achievements" class="btn btn-secondary">Back to Menu</button>
            </div>
        </div>

        <!-- Tournament -->
        <div id="tournament" class="screen">
            <div class="container">
                <h2>üèÜ Tournament Mode üèÜ</h2>
                <div class="tournament-bracket" id="tournament-bracket"></div>
                <div class="tournament-actions">
                    <button id="join-tournament" class="btn btn-primary">Join Tournament</button>
                    <button id="back-from-tournament" class="btn btn-secondary">Back to Menu</button>
                </div>
            </div>
        </div>

        <!-- Leaderboard -->
        <div id="leaderboard" class="screen">
            <div class="container">
                <h2>üèÜ Global Leaderboard üèÜ</h2>
                <div id="leaderboard-list" class="leaderboard-list"></div>
                <button id="back-from-leaderboard" class="btn btn-secondary">Back to Menu</button>
            </div>
        </div>

        <!-- Live Activity -->
        <div id="live-activity" class="live-activity hidden">
            <div class="activity-content" id="activity-content"></div>
        </div>

        <!-- Achievement Notification -->
        <div id="achievement-notification" class="achievement-notification hidden">
            <div class="achievement-content">
                <div class="achievement-icon" id="achievement-icon"></div>
                <div class="achievement-text">
                    <div class="achievement-title" id="achievement-title"></div>
                    <div class="achievement-desc" id="achievement-desc"></div>
                </div>
            </div>
        </div>

        <!-- Power-up Notification -->
        <div id="powerup-notification" class="powerup-notification hidden">
            <div class="powerup-content">
                <div class="powerup-icon" id="powerup-icon"></div>
                <div class="powerup-text" id="powerup-text"></div>
            </div>
        </div>
    </div>

    <script src="/socket.io/socket.io.js"></script>
    <script src="sounds.js"></script>
    <script src="features.js"></script>
    <script src="game.js"></script>
    <script src="debug.js"></script>
</body>
</html>
